<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RifqyDesign • Live Code Editor</title>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@500;700&family=Poppins:wght@600;800&display=swap" rel="stylesheet">
  <style>
    :root{--p:#8b5cf6;--bg:#0a0a1a;--panel:#111;--text:#e2e8f0;--radius:16px}
    *{margin:0;padding:0;box-sizing:border-box}
    body{background:var(--bg);color:var(--text);font-family:'Poppins',sans-serif;display:grid;grid-template-rows:auto 1fr;height:100dvh;overflow:hidden}
    header{text-align:center;padding:20px;background:linear-gradient(to right,#1a1a2e,#16213e);border-bottom:3px solid var(--p)}
    h1{font-size:2.2rem;background:linear-gradient(to right,var(--p),#c4b5fd);-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-weight:800}
    .editor{display:grid;grid-template-columns:1fr 1fr;gap:0;height:100%}
    textarea,iframe{width:100%;height:100%;border:none;outline:none;font-family:'JetBrains Mono',monospace;font-size:15px;padding:16px;background:var(--panel);color:var(--text);resize:none}
    iframe{background:#fff}
    .tabs{display:flex;background:#111}
    .tab{padding:12px 20px;cursor:pointer;background:#222;color:#aaa;transition:.3s}
    .tab.active{background:var(--p);color:#fff}
    .download-btn{position:fixed;bottom:20px;right:20px;background:var(--p);color:#fff;padding:14px 24px;border-radius:50px;font-weight:700;box-shadow:0 8px 20px rgba(139,92,246,0.4);cursor:pointer;z-index:99;transition:.3s}
    .download-btn:hover{transform:scale(1.1);background:#a78bfa}
    @media(max-width:900px){
      .editor{grid-template-columns:1fr;grid-template-rows:1fr 1fr}
      .tabs{order:-1}
    }
  </style>
</head>
<body>
  <header>
    <h1>RifqyDesign • Live Code Editor</h1>
    <p style="opacity:0.8;margin-top:8px">HTML + CSS + JS → Preview langsung!</p>
  </header>

  <div class="tabs">
    <div class="tab active" data-target="html">HTML</div>
    <div class="tab" data-target="css">CSS</div>
    <div class="tab" data-target="js">JavaScript</div>
  </div>

  <div class="editor">
    <div id="html" class="panel">
      <textarea id="html-code"><div class="card">
  <h2>Hello from RifqyDesign!</h2>
  <p>Klik tombol di bawah untuk download hasilnya</p>
  <button class="btn">Download Project</button>
</div></textarea>
    </div>
    <iframe id="preview"></iframe>
  </div>

  <div class="download-btn" onclick="downloadProject()">Download ZIP</div>

  <script>
    const htmlCode = document.getElementById('html-code');
    const tabs = document.querySelectorAll('.tab');
    let current = 'html';

    // Default CSS & JS
    let cssCode = `body{margin:0;background:#0a0a1a;color:#e2e8f0;font-family:Poppins,sans-serif;display:grid;place-items:center;height:100dvh}
.card{background:rgba(139,92,246,0.15);padding:40px;border-radius:20px;text-align:center;border:2px solid #8b5cf6;box-shadow:0 10px 30px rgba(139,92,246,0.2)}
h2{font-size:2.5rem;background:linear-gradient(to right,#8b5cf6,#c4b5fd);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.btn{background:#8b5cf6;color:#fff;padding:14px 32px;border:none;border-radius:50px;margin-top:20px;cursor:pointer;font-size:1.1rem}`;
    let jsCode = `document.querySelector('.btn').addEventListener('click',()=>{alert('Keren banget desainnya!')})`;

    function update() {
      const result = `
        <style>${cssCode}</style>
        ${htmlCode.value}
        <script>${jsCode}<\/script>
      `;
      document.getElementById('preview').contentDocument.body.innerHTML = result;
    }

    // Tab switch
    tabs.forEach(t => t.onclick = () => {
      tabs.forEach(x => x.classList.remove('active'));
      t.classList.add('active');
      document.querySelectorAll('.panel').forEach(p => p.style.display = 'none');
      if(t.dataset.target === 'html') {
        htmlCode.parentElement.style.display = 'block';
      } else if(t.dataset.target === 'css') {
        const textarea = document.createElement('textarea');
        textarea.value = cssCode;
        textarea.oninput = e => cssCode = e.target.value;
        htmlCode.parentElement.innerHTML = '';
        htmlCode.parentElement.appendChild(textarea);
        htmlCode.parentElement.style.display = 'block';
      } else {
        const textarea = document.createElement('textarea');
        textarea.value = jsCode;
        textarea.oninput = e => jsCode = e.target.value;
        htmlCode.parentElement.innerHTML = '';
        htmlCode.parentElement.appendChild(textarea);
        htmlCode.parentElement.style.display = 'block';
      }
      update();
    });

    htmlCode.oninput = update;
    update();

    // Download ZIP
    function downloadProject() {
      const zip = new JSZip();
      zip.file("index.html", `<html><head><style>\( {cssCode}</style></head><body> \){htmlCode.value}<script>${jsCode}<\/script></body></html>`);
      zip.generateAsync({type:"blob"}).then(blob => {
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = "RifqyDesign-Project.zip";
        a.click();
      });
    }
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
</body>
</html>
